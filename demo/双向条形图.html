<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>双向条形图</title>
</head>

<body>
  <h1>双向条形图</h1>
  <canvas id="demo" width="600px" height="400px">
    对不起，您的浏览器暂不支持canvas
  </canvas>
</body>
<script>
  var data = [441, 132, 222, 333, 444, 513, 416, 132, 222, 333, 444, 513, 416]
  goBarChart(data)
  function goBarChart(dataArr) {
    var canvas, ctx
    var cWidth, cHeight, originX, originY, cMargin
    var bMargin, tobalBars, bWidth, maxValue
    var totalYNomber

    canvas = document.getElementById('demo')
    if (canvas && canvas.getContext) {
      ctx = canvas.getContext('2d')
    }
    initChart()
    drawLineLabelMarkers()

    function drawLineLabelMarkers() {
      ctx.translate(.5, .5)
      // drawLine(cWidth / 2, cMargin, cWidth / 2, originY)
      // drawLine(cMargin, originY, originX, originY)
      ctx.translate(-0.5, -0.5)
      drawMarkers()
    }

    function drawMarkers() {
      ctx.textAlign = 'center'
      var oneVal = maxValue / tobalBars
      console.log(maxValue)
      console.log(oneVal)
      var tobalBarsM = Math.trunc(tobalBars / 2)
      for (var i = 0; i < tobalBars; i++) {
        console.log(oneVal * i)
        var markerVal = Math.trunc(i * oneVal)
        var xMarker = parseInt(originX * (i / tobalBars) + cMargin)
        var yMarker = cHeight - 15
        ctx.translate(-0.5, -0.5)
        drawLine(xMarker, cMargin, xMarker, yMarker - cMargin)
        ctx.fillText(markerVal, xMarker, yMarker)
        if (i < tobalBarsM) {
        }
        if (i === tobalBarsM) {
        }
        if (i > tobalBarsM) {
        }
        ctx.translate(0.5, 0.5)
      }
    }

    function drawLine(x, y, X, Y) {
      ctx.beginPath()
      ctx.moveTo(x, y)
      ctx.lineTo(X, Y)
      ctx.stroke()
      ctx.closePath()
    }
    function initChart() {
      cMargin = 50
      cWidth = canvas.width
      cHeight = canvas.height
      originX = cWidth - cMargin
      originY = cHeight - cMargin

      bMargin = 15
      tobalBars = dataArr.length
      bWidth = parseInt(cWidth / tobalBars - bMargin)
      maxValue = 0
      for (var i = 0; i < tobalBars; i++) {
        var barVal = parseInt(dataArr[i])
        if (barVal > maxValue) {
          maxValue = barVal
        }
      }
      totalYNomber = 10
    }
  }







</script>

</html>